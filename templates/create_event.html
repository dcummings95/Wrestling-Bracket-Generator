{% extends "base.html" %}

{% block title %}Create Event{% endblock %}

{% block content %}
<div class="create-event-page">
    <h1>Configure Event</h1>
    <p class="wrestler-count">{{ wrestler_count }} wrestlers loaded</p>

    <form method="POST" class="event-form">
        <div class="form-group">
            <label for="event_name">Event Name</label>
            <input type="text" id="event_name" name="event_name" required placeholder="e.g., Winter Classic 2024">
        </div>

        <div class="form-group">
            <label for="event_date">Event Date</label>
            <input type="date" id="event_date" name="event_date" required>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="num_mats">Number of Mats</label>
                <input type="number" id="num_mats" name="num_mats" value="3" min="1" max="4">
            </div>

            <div class="form-group">
                <label for="bracket_size">Bracket Size</label>
                <select id="bracket_size" name="bracket_size">
                    <option value="4" selected>4-man Round Robin</option>
                    <option value="3">3-man Round Robin</option>
                    <option value="5">5-man Round Robin</option>
                </select>
            </div>
        </div>

        <div class="constraint-info">
            <h3>Matching Constraints</h3>
            <ul>
                <li><strong>Weight:</strong> Max 10 lbs difference within bracket</li>
                <li><strong>Grade:</strong> Max ±1 grade difference</li>
                <li><strong>Rank:</strong> Max ±2 rank difference</li>
                <li><strong>School:</strong> Max 2 wrestlers from same school per bracket</li>
            </ul>
            <p class="constraint-note">Constraints will be relaxed automatically if needed to place all wrestlers.</p>
        </div>

        <button type="submit" class="btn btn-primary btn-large">Generate Brackets</button>
    </form>

    <details class="wrestler-preview">
        <summary>Preview Loaded Wrestlers ({{ wrestler_count }})</summary>
        <table class="wrestlers-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Grade</th>
                    <th>Weight</th>
                    <th>Rank</th>
                    <th>School</th>
                </tr>
            </thead>
            <tbody>
                {% for w in wrestlers %}
                <tr>
                    <td>{{ w.full_name }}</td>
                    <td>{{ w.grade_display }}</td>
                    <td>{{ w.weight }}</td>
                    <td>{{ w.rank }}</td>
                    <td>{{ w.school }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </details>
</div>
{% endblock %}
